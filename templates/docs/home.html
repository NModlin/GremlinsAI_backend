{% extends "docs/base.html" %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
<div class="hero-section mb-5">
    <div class="row align-items-center">
        <div class="col-lg-8">
            <h1 class="display-4 fw-bold text-primary mb-3">
                <i class="fas fa-robot me-3"></i>
                Welcome to gremlinsAI
            </h1>
            <p class="lead text-muted mb-4">
                Sophisticated, headless, multi-modal AI system with comprehensive APIs for developers.
                Build powerful applications with our REST, GraphQL, and WebSocket interfaces.
            </p>
            <div class="d-flex gap-3 flex-wrap">
                <a href="/docs/api-reference" class="btn btn-primary btn-lg">
                    <i class="fas fa-book me-2"></i>
                    API Reference
                </a>
                <a href="/docs/code-examples" class="btn btn-outline-primary btn-lg">
                    <i class="fas fa-code me-2"></i>
                    Code Examples
                </a>
                <a href="/docs/graphql-playground" class="btn btn-outline-secondary btn-lg">
                    <i class="fas fa-play-circle me-2"></i>
                    Try GraphQL
                </a>
            </div>
        </div>
        <div class="col-lg-4 text-center">
            <div class="system-status-card p-4 bg-light rounded-3">
                <h5 class="mb-3">System Status</h5>
                <div class="status-badge status-healthy mb-3">
                    <i class="fas fa-check-circle"></i>
                    System Healthy
                </div>
                <div class="system-metrics">
                    <div class="metric mb-2">
                        <small class="text-muted">Version:</small>
                        <strong>{{ system_info.orchestrator_version or version }}</strong>
                    </div>
                    <div class="metric mb-2">
                        <small class="text-muted">Active Connections:</small>
                        <strong>{{ system_info.active_connections }}</strong>
                    </div>
                    <div class="metric mb-2">
                        <small class="text-muted">Available Agents:</small>
                        <strong>{{ system_info.available_agents }}</strong>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Feature Cards -->
<div class="row mb-5">
    <div class="col-md-4 mb-4">
        <div class="card h-100 border-0 shadow-sm">
            <div class="card-body text-center">
                <div class="feature-icon mb-3">
                    <i class="fas fa-brain fa-3x text-primary"></i>
                </div>
                <h5 class="card-title">Core Agent Intelligence</h5>
                <p class="card-text text-muted">
                    LangGraph-powered agents with tool integration and sophisticated reasoning capabilities.
                </p>
                <a href="/docs/api-reference#agent-endpoints" class="btn btn-outline-primary">
                    Learn More
                </a>
            </div>
        </div>
    </div>
    
    <div class="col-md-4 mb-4">
        <div class="card h-100 border-0 shadow-sm">
            <div class="card-body text-center">
                <div class="feature-icon mb-3">
                    <i class="fas fa-users fa-3x text-success"></i>
                </div>
                <h5 class="card-title">Multi-Agent Collaboration</h5>
                <p class="card-text text-muted">
                    Specialized agents working together on complex workflows with CrewAI orchestration.
                </p>
                <a href="/docs/api-reference#multi-agent-endpoints" class="btn btn-outline-success">
                    Learn More
                </a>
            </div>
        </div>
    </div>
    
    <div class="col-md-4 mb-4">
        <div class="card h-100 border-0 shadow-sm">
            <div class="card-body text-center">
                <div class="feature-icon mb-3">
                    <i class="fas fa-database fa-3x text-info"></i>
                </div>
                <h5 class="card-title">Document Knowledge</h5>
                <p class="card-text text-muted">
                    Vector search and RAG capabilities with intelligent document processing and retrieval.
                </p>
                <a href="/docs/api-reference#document-endpoints" class="btn btn-outline-info">
                    Learn More
                </a>
            </div>
        </div>
    </div>
</div>

<!-- API Overview -->
<div class="row mb-5">
    <div class="col-12">
        <h2 class="mb-4">API Overview</h2>
        <div class="row">
            <div class="col-lg-4 mb-4">
                <div class="api-card p-4 border rounded-3">
                    <div class="d-flex align-items-center mb-3">
                        <i class="fas fa-server fa-2x text-primary me-3"></i>
                        <div>
                            <h5 class="mb-0">REST API</h5>
                            <small class="text-muted">Traditional HTTP endpoints</small>
                        </div>
                    </div>
                    <p class="text-muted mb-3">
                        Complete REST API with 30+ endpoints covering all system functionality.
                    </p>
                    <div class="api-features mb-3">
                        <div class="feature-item mb-1">
                            <i class="fas fa-check text-success me-2"></i>
                            <small>JSON request/response</small>
                        </div>
                        <div class="feature-item mb-1">
                            <i class="fas fa-check text-success me-2"></i>
                            <small>OpenAPI documentation</small>
                        </div>
                        <div class="feature-item mb-1">
                            <i class="fas fa-check text-success me-2"></i>
                            <small>Interactive testing</small>
                        </div>
                    </div>
                    <a href="/docs/api-reference" class="btn btn-primary btn-sm">
                        Explore REST API
                    </a>
                </div>
            </div>
            
            <div class="col-lg-4 mb-4">
                <div class="api-card p-4 border rounded-3">
                    <div class="d-flex align-items-center mb-3">
                        <i class="fas fa-project-diagram fa-2x text-success me-3"></i>
                        <div>
                            <h5 class="mb-0">GraphQL API</h5>
                            <small class="text-muted">Flexible query language</small>
                        </div>
                    </div>
                    <p class="text-muted mb-3">
                        Modern GraphQL API with queries, mutations, and real-time subscriptions.
                    </p>
                    <div class="api-features mb-3">
                        <div class="feature-item mb-1">
                            <i class="fas fa-check text-success me-2"></i>
                            <small>Type-safe queries</small>
                        </div>
                        <div class="feature-item mb-1">
                            <i class="fas fa-check text-success me-2"></i>
                            <small>Real-time subscriptions</small>
                        </div>
                        <div class="feature-item mb-1">
                            <i class="fas fa-check text-success me-2"></i>
                            <small>Interactive playground</small>
                        </div>
                    </div>
                    <a href="/docs/graphql-playground" class="btn btn-success btn-sm">
                        Try GraphQL
                    </a>
                </div>
            </div>
            
            <div class="col-lg-4 mb-4">
                <div class="api-card p-4 border rounded-3">
                    <div class="d-flex align-items-center mb-3">
                        <i class="fas fa-bolt fa-2x text-warning me-3"></i>
                        <div>
                            <h5 class="mb-0">WebSocket API</h5>
                            <small class="text-muted">Real-time communication</small>
                        </div>
                    </div>
                    <p class="text-muted mb-3">
                        Real-time bidirectional communication with live updates and subscriptions.
                    </p>
                    <div class="api-features mb-3">
                        <div class="feature-item mb-1">
                            <i class="fas fa-check text-success me-2"></i>
                            <small>Live updates</small>
                        </div>
                        <div class="feature-item mb-1">
                            <i class="fas fa-check text-success me-2"></i>
                            <small>Event subscriptions</small>
                        </div>
                        <div class="feature-item mb-1">
                            <i class="fas fa-check text-success me-2"></i>
                            <small>Connection management</small>
                        </div>
                    </div>
                    <a href="/docs/websocket-tester" class="btn btn-warning btn-sm">
                        Test WebSocket
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Quick Start -->
<div class="row mb-5">
    <div class="col-12">
        <h2 class="mb-4">Quick Start</h2>
        <div class="row">
            <div class="col-lg-6">
                <h5>1. Install the SDK</h5>
                <div class="code-block">
                    <code>pip install gremlins-ai</code>
                </div>
                
                <h5>2. Make your first API call</h5>
                <pre class="code-block"><code class="language-python">import asyncio
from gremlins_ai import GremlinsAIClient

async def main():
    async with GremlinsAIClient() as client:
        response = await client.invoke_agent("Hello, AI!")
        print(response["output"])

asyncio.run(main())</code></pre>
            </div>
            
            <div class="col-lg-6">
                <h5>3. Try GraphQL</h5>
                <pre class="code-block"><code class="language-graphql">query {
  conversations(limit: 5) {
    id
    title
    messages {
      role
      content
    }
  }
}</code></pre>
                
                <h5>4. Connect via WebSocket</h5>
                <pre class="code-block"><code class="language-javascript">const ws = new WebSocket('ws://localhost:8000/api/v1/ws/ws');
ws.send(JSON.stringify({
  type: 'subscribe',
  subscription_type: 'conversation'
}));</code></pre>
            </div>
        </div>
    </div>
</div>

<!-- System Components -->
<div class="row">
    <div class="col-12">
        <h2 class="mb-4">System Components</h2>
        <div class="row">
            <div class="col-md-6 mb-3">
                <div class="component-status d-flex align-items-center p-3 border rounded">
                    <i class="fas fa-cogs fa-2x text-primary me-3"></i>
                    <div class="flex-grow-1">
                        <h6 class="mb-1">Orchestrator</h6>
                        <small class="text-muted">{{ system_info.supported_tasks }} task types supported</small>
                    </div>
                    <span class="status-badge status-healthy">
                        <i class="fas fa-check-circle"></i>
                        Active
                    </span>
                </div>
            </div>
            
            <div class="col-md-6 mb-3">
                <div class="component-status d-flex align-items-center p-3 border rounded">
                    <i class="fas fa-search fa-2x text-info me-3"></i>
                    <div class="flex-grow-1">
                        <h6 class="mb-1">Vector Store</h6>
                        <small class="text-muted">Document search and RAG</small>
                    </div>
                    {% if system_info.vector_store_connected %}
                    <span class="status-badge status-healthy">
                        <i class="fas fa-check-circle"></i>
                        Connected
                    </span>
                    {% else %}
                    <span class="status-badge status-warning">
                        <i class="fas fa-exclamation-triangle"></i>
                        Fallback
                    </span>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
// Auto-refresh system status
setInterval(async () => {
    try {
        const response = await fetch('/docs/system-status');
        const status = await response.json();
        
        // Update connection count
        const connectionElement = document.querySelector('.system-metrics .metric:nth-child(2) strong');
        if (connectionElement) {
            connectionElement.textContent = status.components.websocket.active_connections;
        }
    } catch (error) {
        console.error('Failed to update system status:', error);
    }
}, 30000); // Update every 30 seconds
</script>
{% endblock %}
